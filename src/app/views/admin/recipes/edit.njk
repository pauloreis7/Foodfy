{% extends 'admin/layout_admin.njk' %}

{% block title %} <title>Editar {{ recipe.title }}</title> {% endblock %}

{% block content %}

    <h1>Editando receita</h1>

    <form action="/recipes?_method=delete" id="delete" method="post">
    
        <input type="hidden" name="id" value="{{ recipe.id }}">

        <button type="submit" id="delete_button">Deletar</button>
    
    </form>

    <form action="/recipes?_method=put" method="post">

        <input type="hidden" name="id" value="{{ recipe.id }}">

        <button type="submit">Salvar receita</button>

        {% include 'admin/recipes/fields.njk' %}

    </form>

    {% include 'admin/recipes/add_item.njk' %}

    <script>
    
        //Delete verify
        const formDelete = document.querySelector("#delete")

        formDelete.addEventListener("submit", function (event) {
            const comfirm = confirm("Deseja mesmo apagar essa receita?")

            if (!comfirm) {
                event.preventDefault()
            }
        })
    
    </script>

{% endblock %}

{% block modal %}
    
    {% if err %}

        {% include 'admin/modal.njk' %}

    {% endif %}

{% endblock %}